# NaCl minimal finetune config (override for tiny dataset)
out_dir: /home/liuxiangshuo/projects/crystallm-repro/out/nacl_ft_small
dataset: /home/liuxiangshuo/projects/crystallm-repro/data/nacl_min/tokens

init_from: finetune
always_save_checkpoint: true
validate: true

# IMPORTANT for tiny dataset:
block_size: 256
eval_iters_train: 20
eval_iters_val: 20

# Make sure it is actually off:
compile: false

device: cuda
dtype: float16

max_iters: 1000
eval_interval: 100
log_interval: 10

batch_size: 8
gradient_accumulation_steps: 4

# keep v1_small-ish model size
n_layer: 8
n_head: 8
n_embd: 512
dropout: 0.1
bias: false

learning_rate: 0.001
weight_decay: 0.1
beta1: 0.9
beta2: 0.99
grad_clip: 1.0
decay_lr: true
warmup_iters: 100
lr_decay_iters: 100000
min_lr: 0.0001
